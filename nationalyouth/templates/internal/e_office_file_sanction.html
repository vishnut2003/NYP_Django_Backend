<!--
   Made By -: Techzniczone
   website - :https://www.techzniczone.com/
   email - :techzniczone@gmail.com
   -->
<!-------------------------------------- E Office File Sanction Registration Page ------------------->
<!--------------------------------------------------------------------------------------------------->
{% extends 'Main/base.html' %} {% block main_content %} {% load static %}
<div class="phStickyWrap">
    {% include 'Main/header.html' %}
</div>

<body>
    <div class="d-lg-flex half">
        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-12 col-md-12 col-sm-6 py-5 pt-15 pb-15">
                    <center>
                        <h3 id="e_office_file_sanction">E OFFICE FILE SANCTION</h3>

                        <div style="display: flex; flex-direction: column; align-items: center;">
                            <div style="width: 100px; height: 3px; background-color: #3446CD; margin-bottom: 10px;">
                            </div>
                            <div style="width: 30px; height: 3px; background-color: #3446CD; margin-bottom: 60px;">
                            </div>
                        </div>
                    </center>
                    <!-- <center>
                  <p class="mb-4">Error Message Comes Here</p>
                  </center> -->
                    <div class="text-center alert alert-danger" id="erorr" role="alert" style="display:none;"></div>

                    <form method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Dockt No. <span class="text-danger">*</span></label>
                                    <input id="docket_number" type="text" class="form-control" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Employee Code <span class="text-danger">*</span></label>
                                    <input id="employee_code" type="text" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Employee Name <span class="text-danger">*</span></label>
                                    <input id="employee_name" type="text" class="form-control" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>File No. <span class="text-danger">*</span></label>
                                    <input id="file_number" type="text" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>File Name <span class="text-danger">*</span></label>
                                    <input id="file_name" type="text" class="form-control" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Sanction Clerk Status <span class="text-danger">*</span></label>
                                    <select id="sanction_clerk" class="form-control">
                                        <option value="" selected>Select</option>
                                        {% for st in all_status %}
                                        <option value="{{st.id}}">{{st.status}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Officer Grade 1 Status <span class="text-danger">*</span></label>
                                    <select id="officer_grade_1" class="form-control">
                                        <option value="" selected>Select</option>
                                        {% for st in all_status %}
                                        <option value="{{st.id}}">{{st.status}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Officer Grade 2 Status <span class="text-danger">*</span></label>
                                    <select id="officer_grade_2" class="form-control">
                                        <option value="" selected>Select</option>
                                        {% for st in all_status %}
                                        <option value="{{st.id}}">{{st.status}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Note File</label>
                                    <textarea id="note_file" type="text" class="form-control"></textarea>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>General Note Sanction Order</label>
                                    <textarea id="general_note_sanction_order" type="text"
                                        class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Order No. <span class="text-danger">*</span></label>
                                    <input id="order_number" type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group first">
                                    <label>Remarks</label>
                                    <input id="remark" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <input type="button" onclick="file_sanction()" value="Submit Application"
                            class="btn px-5 btn-primary" style="background-color: #3446CD;" />
                    </form>
                </div>
            </div>
        </div>

        <script>

            function file_sanction() {
                let docket_number = document.getElementById("docket_number").value;
                let employee_code = document.getElementById("employee_code").value;
                let employee_name = document.getElementById("employee_name").value;
                let file_number = document.getElementById("file_number").value;
                let file_name = document.getElementById("file_name").value;
                let sanction_clerk = document.getElementById("sanction_clerk").value;
                let officer_grade_1 = document.getElementById("officer_grade_1").value;
                let officer_grade_2 = document.getElementById("officer_grade_2").value;
                let note_file = document.getElementById("note_file").value;
                let general_note_sanction_order = document.getElementById("general_note_sanction_order").value;
                let order_number = document.getElementById("order_number").value;
                let remark = document.getElementById("remark").value;
                let er=document.getElementById("erorr")

                if (docket_number === "") {
                    er.innerHTML = "Enter Docket Number";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (employee_code === "") {
                    er.innerHTML = "Enter Employee Code";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (employee_name === "") {
                    er.innerHTML = "Enter Employee Name";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (file_number === "") {
                    er.innerHTML = "Enter File Number";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (file_name === "") {
                    er.innerHTML = "Enter File Name";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (sanction_clerk === "") {
                    er.innerHTML = "Select Sanction Clerk Status";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (officer_grade_1 === "") {
                    er.innerHTML = "Select Officer Grade 1 Status";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } 
                else if (officer_grade_2 === "") {
                    er.innerHTML = "Select Officer Grade 2 Status";
                    window.location.href = "#e_office_file_sanction";
                    er.style.display = "block";
                } else {
                    $.ajax({
                        type: "post",
                        url: "/e_office_file_sanction",
                        data: {
                            docket_number: docket_number,
                            employee_code: employee_code,
                            employee_name: employee_name,
                            file_number: file_number,
                            file_name: file_name,
                            sanction_clerk: sanction_clerk,
                            officer_grade_1: officer_grade_1,
                            officer_grade_2: officer_grade_2,
                            note_file: note_file,
                            general_note_sanction_order: general_note_sanction_order,
                            order_number: order_number,
                            remark: remark,
                            csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
                        },
                        success: function (response) {
                            if (response === "Save") {
                                er.setAttribute("class", "text-center alert alert-success");
                                er.style.display = "block"
                                er.innerHTML = "Form submission Successfully"
                                window.location.href = "#e_office_file_sanction"

                                setTimeout(() => {
                                    window.location.href = "/e_office_file_sanction"

                                }, 4000)

                            } else {
                                alert("Ooops, something went wrong");
                            }
                        },
                    });
                }
            }



        </script>
        <script src="{% static 'forms/js/jquery-3.3.1.min.js' %}"></script>
        <script src="{% static 'forms/js/popper.min.js' %}"></script>
        <script src="{% static 'forms/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'forms/js/main.js' %}"></script>
        {% endblock %}
    </div>
</body>